// SPDX-License-Identifier: GPL-2.0-only
/*
 * ssm3582a.h -- SSM3582A ALSA SoC codec driver
 *
 * Author:      Alexey Pavlov <rnewbie@hotmail.com>
 *              Copyright 2023
 */
#ifndef SSM3582_H
#define SSM3582_H

#define SSM3582_START_ADDR 0x10
#define SSM3582_NUM_OF_ADDR 0x10

#define SSM3582_BCLK_MAX 49152000 // Hz

#define SSM3582_REG_VENDOR_ID 0x00
#define SSM3582_REG_DEVICE_ID1 0x01
#define SSM3582_REG_DEVICE_ID2 0x02
#define SSM3582_REG_REVISION 0x03
#define SSM3582_REG_POWER_CTRL 0x04
#define SSM3582_REG_AMP_DAC_CTRL 0x05
#define SSM3582_REG_DAC_CTRL 0x06
#define SSM3582_REG_VOL_LEFT_CTRL 0x07
#define SSM3582_REG_VOL_RIGHT_CTRL 0x08
#define SSM3582_REG_SAI_CTRL1 0x09
#define SSM3582_REG_SAI_CTRL2 0x0A
#define SSM3582_REG_SLOT_LEFT_CTRL 0x0B
#define SSM3582_REG_SLOT_RIGHT_CTRL 0x0C
#define SSM3582_REG_LIM_LEFT_CTRL1 0x0E
#define SSM3582_REG_LIM_LEFT_CTRL2 0x0F
#define SSM3582_REG_LIM_LEFT_CTRL3 0x10
#define SSM3582_REG_LIM_RIGHT_CTRL1 0x11
#define SSM3582_REG_LIM_RIGHT_CTRL2 0x12
#define SSM3582_REG_LIM_RIGHT_CTRL3 0x13
#define SSM3582_REG_CLIP_LEFT_CTRL 0x14
#define SSM3582_REG_CLIP_RIGHT_CTRL 0x15
#define SSM3582_REG_FAULT_CTRL1 0x16
#define SSM3582_REG_FAULT_CTRL2 0x17
#define SSM3582_REG_STATUS1 0x18
#define SSM3582_REG_STATUS2 0x19
#define SSM3582_REG_VBAT 0x1A
#define SSM3582_REG_TEMP 0x1B
#define SSM3582_REG_SOFT_RESET 0x1C

#define SSM3582_VENDOR_ID 0x41
#define SSM3582_DEVICE_ID1 0x35
#define SSM3582_DEVICE_ID2 0x82

#define SSM3582_POWER_CTRL_APWDN_EN_POS (7U)
#define SSM3582_POWER_CTRL_APWDN_EN_BITS 1U
#define SSM3582_POWER_CTRL_APWDN_EN                                            \
  (((1U << SSM3582_POWER_CTRL_APWDN_EN_BITS) - 1)                              \
   << SSM3582_POWER_CTRL_APWDN_EN_POS)

#define SSM3582_POWER_CTRL_TEMP_PWDN_POS (5U)
#define SSM3582_POWER_CTRL_TEMP_PWDN_BITS 1U
#define SSM3582_POWER_CTRL_TEMP_PWDN                                           \
  (((1U << SSM3582_POWER_CTRL_TEMP_PWDN_BITS) - 1)                             \
   << SSM3582_POWER_CTRL_TEMP_PWDN_POS)

// Mono Mode Selection
//  0: Mono mode enabled
//  1: Stereo mode enabled
#define SSM3582_POWER_CTRL_MONO_POS (4U)
#define SSM3582_POWER_CTRL_MONO (1U << SSM3582_POWER_CTRL_MONO_POS)

// Right Channel Power-Down
#define SSM3582_POWER_CTRL_R_PWDN_POS (3U)
#define SSM3582_POWER_CTRL_R_PWDN (1U << SSM3582_POWER_CTRL_R_PWDN_POS)

// Left Channel Power-Down
#define SSM3582_POWER_CTRL_L_PWDN_POS (2U)
#define SSM3582_POWER_CTRL_L_PWDN (1U << SSM3582_POWER_CTRL_L_PWDN_POS)

// Software Master Power-Down
#define SSM3582_POWER_CTRL_SPWDN_POS (0U)
#define SSM3582_POWER_CTRL_SPWDN (1U << SSM3582_POWER_CTRL_SPWDN_POS)

#define SSM3582_AMP_DAC_CTRL_DAC_LPM_POS (7U)
#define SSM3582_AMP_DAC_CTRL_DAC_LPM (1U << SSM3582_MP_DAC_CTRL_DAC_LPM_POS)
#define SSM3582_AMP_DAC_CTRL_DAC_POL_R_POS (5U)
#define SSM3582_AMP_DAC_CTRL_DAC_POL_R (1U << SSM3582_MP_DAC_CTRL_DAC_POL_R_POS)
#define SSM3582_AMP_DAC_CTRL_DAC_POL_L_POS (4U)
#define SSM3582_AMP_DAC_CTRL_DAC_POL_L (1U << SSM3582_MP_DAC_CTRL_DAC_POL_L_POS)
#define SSM3582_AMP_DAC_CTRL_EDGE_POS (3U)
#define SSM3582_AMP_DAC_CTRL_EDGE (1U << SSM3582_MP_DAC_CTRL_EDGE_POS)
#define SSM3582_AMP_DAC_CTRL_ANA_GAIN_POS (0U)
#define SSM3582_AMP_DAC_CTRL_ANA_GAIN (1U << SSM3582_MP_DAC_CTRL_ANA_GAIN_POS)

#define SSM3582_DAC_CTRL_DAC_HV_POS (7U)
#define SSM3582_DAC_CTRL_DAC_HV (1U << SSM3582_DAC_CTRL_DAC_HV_POS)
#define SSM3582_DAC_CTRL_DAC_MUTE_R_POS (6U)
#define SSM3582_DAC_CTRL_DAC_MUTE_R (1U << SSM3582_DAC_CTRL_DAC_MUTE_R_POS)
#define SSM3582_DAC_CTRL_DAC_MUTE_L_POS (5U)
#define SSM3582_DAC_CTRL_DAC_MUTE_L (1U << SSM3582_DAC_CTRL_DAC_MUTE_L_POS)
#define SSM3582_DAC_CTRL_DAC_HPF_POS (4U)
#define SSM3582_DAC_CTRL_DAC_HPF (1U << SSM3582_DAC_CTRL_DAC_HPF_POS)
#define SSM3582_DAC_CTRL_DAC_FS_POS (0U)
#define SSM3582_DAC_CTRL_DAC_FS_BITS (3U)
#define SSM3582_DAC_CTRL_DAC_FS                                                \
  (((1U << SSM3582_DAC_CTRL_DAC_FS_BITS) - 1) << SSM3582_DAC_CTRL_DAC_FS_POS)
#define SSM3582_DAC_CTRL_DAC_FS_8K_12K (0U)
#define SSM3582_DAC_CTRL_DAC_FS_16K_24K (1U)
#define SSM3582_DAC_CTRL_DAC_FS_32K_48K (2U)
#define SSM3582_DAC_CTRL_DAC_FS_64K_96K (3U)
#define SSM3582_DAC_CTRL_DAC_FS_128K_192K (4U)
#define SSM3582_DAC_CTRL_DAC_FS_48K_72K (5U)

#define SSM3582_VOL_CTRL_BITS (8U)
#define SSM3582_VOL_CTRL_POS (0U)
#define SSM3582_VOL_CTRL                                                       \
  (((1U << SSM3582_VOL_CTRL_BITS) - 1) << SSM3582_VOL_CTRL_POS)

#define SSM3582_SAI_CTRL1_BCLK_POL_POS (6U)
#define SSM3582_SAI_CTRL1_BCLK_POL (1U << SSM3582_SAI_CTRL1_BCLK_POL_POS)
#define SSM3582_SAI_CTRL1_TDM_BCLKS_POS (3U)
#define SSM3582_SAI_CTRL1_TDM_BCLKS_BITS (3U)
#define SSM3582_SAI_CTRL1_TDM_BCLKS_MASK                                       \
  (((1U << SSM3582_SAI_CTRL1_TDM_BCLKS_BITS) - 1)                              \
   << SSM3582_SAI_CTRL1_TDM_BCLKS_POS)
#define SSM3582_SAI_CTRL1_TDM_BCLKS_16 ((0U) << SSM3582_SAI_CTRL1_TDM_BCLKS_POS)
#define SSM3582_SAI_CTRL1_TDM_BCLKS_24 ((1U) << SSM3582_SAI_CTRL1_TDM_BCLKS_POS)
#define SSM3582_SAI_CTRL1_TDM_BCLKS_32 ((2U) << SSM3582_SAI_CTRL1_TDM_BCLKS_POS)
#define SSM3582_SAI_CTRL1_TDM_BCLKS_48 ((3U) << SSM3582_SAI_CTRL1_TDM_BCLKS_POS)
#define SSM3582_SAI_CTRL1_TDM_BCLKS_64 ((4U) << SSM3582_SAI_CTRL1_TDM_BCLKS_POS)

#define SSM3582_SAI_CTRL1_TDM_BCLKS (1U << SSM3582_SAI_CTRL1_DM_BCLKS_POS)
#define SSM3582_SAI_CTRL1_FSYNC_MODE_POS (2U)
#define SSM3582_SAI_CTRL1_FSYNC_MODE (1U << SSM3582_SAI_CTRL1_FSYNC_MODE_POS)
#define SSM3582_SAI_CTRL1_DATA_FMT_POS 1U
#define SSM3582_SAI_CTRL1_DATA_FMT (1U << SSM3582_SAI_CTRL1_DATA_FMT_POS)
#define SSM3582_SAI_CTRL1_SAI_MODE_POS (0U)
#define SSM3582_SAI_CTRL1_SAI_MODE (1U << SSM3582_SAI_CTRL1_SAI_MODE_POS)

#define SSM3582_SAI_CTRL2_SDATA_EDGE_POS (7U)
#define SSM3582_SAI_CTRL2_SDATA_EDGE (1U << SSM3582_SAI_CTRL2_SDATA_EDGE_POS)
#define SSM3582_SAI_CTRL2_DATA_WIDTH_POS (4U)
#define SSM3582_SAI_CTRL2_DATA_WIDTH (1U << SSM3582_SAI_CTRL2_DATA_WIDTH_POS)
#define SSM3582_SAI_CTRL2_VOL_ZC_ONLY_POS (3U)
#define SSM3582_SAI_CTRL2_VOL_ZC_ONLY (1U << SSM3582_SAI_CTRL2_VOL_ZC_ONLY_POS)
#define SSM3582_SAI_CTRL2_CLIP_LINK_POS (2U)
#define SSM3582_SAI_CTRL2_CLIP_LINK (1U << SSM3582_SAI_CTRL2_CLIP_LINK_POS)
#define SSM3582_SAI_CTRL2_VOL_LINK_POS 1U
#define SSM3582_SAI_CTRL2_VOL_LINK (1U << SSM3582_SAI_CTRL2_VOL_LINK_POS)
#define SSM3582_SAI_CTRL2_AUTO_SLOT_POS (0U)
#define SSM3582_SAI_CTRL2_AUTO_SLOT (1U << SSM3582_SAI_CTRL2_AUTO_SLOT_POS)

#define SSM3582_LIM_CTRL1_RRT_POS (6U)
#define SSM3582_LIM_CTRL1_RRT_BITS (2U)
#define SSM3582_LIM_CTRL1_RRT                                                  \
  (((1U << SSM3582_LIM_CTRL1_RRT_BITS) - 1) << SSM3582_LIM_CTRL1_RRT_POS)
#define SSM3582_LIM_CTRL1_ATR_POS (4U)
#define SSM3582_LIM_CTRL1_ATR_BITS (2U)
#define SSM3582_LIM_CTRL1_ATR                                                  \
  (((1U << SSM3582_LIM_CTRL1_ATR_BITS) - 1) << SSM3582_LIM_CTRL1_ATR_POS)
#define SSM3582_LIM_RIGHT_CTRL1_LIM_LINK_POS (3U)
#define SSM3582_LIM_RIGHT_CTRL1_LIM_LINK                                       \
  (1U << SSM3582_LIM_RIGHT_CTRL1_LIM_LINK_POS)
#define SSM3582_LIM_CTRL1_VBAT_TRACK_POS (2U)
#define SSM3582_LIM_CTRL1_VBAT_TRACK                                           \
  (1U << SSM3582_LIM_LEFT_CTRL1_BAT_TRACK_L_POS)
#define SSM3582_LIM_CTRL1_EN_POS (0U)
#define SSM3582_LIM_CTRL1_EN_BITS (2U)
#define SSM3582_LIM_CTRL1_EN                                                   \
  (((1U << SSM3582_LIM_CTRL1_EN_BITS) - 1) << SSM3582_LIM_CTRL1_EN_POS)

#define SSM3582_LIM_CTRL2_THRES_POS (3U)
#define SSM3582_LIM_CTRL2_THRES_BITS (5U)
#define SSM3582_LIM_CTRL2_THRES                                                \
  (((1U << SSM3582_LIM_CTRL2_THRES_BITS) - 1) << SSM3582_LIM_CTRL2_THRES_POS)
#define SSM3582_LIM_CTRL2_SLOPE_POS (0U)
#define SSM3582_LIM_CTRL2_SLOPE_BITS (0U)
#define SSM3582_LIM_CTRL2_SLOPE                                                \
  (((1U << SSM3582_LIM_CTRL2_SLOPE_BITS) - 1) << SSM3582_LIM_CTRL2_SLOPE_POS)
#define SSM3582_FAULT_CTRL1_OTW_GAIN_R_POS (4U)
#define SSM3582_FAULT_CTRL1_OTW_GAIN_R                                         \
  (1U << SSM3582_FAULT_CTRL1_OTW_GAIN_R_POS)
#define SSM3582_FAULT_CTRL1_OTW_GAIN_L_POS (0U)
#define SSM3582_FAULT_CTRL1_OTW_GAIN_L                                         \
  (1U << SSM3582_FAULT_CTRL1_OTW_GAIN_L_POS)

#define SSM3582_FAULT_CTRL2_MRCV_POS (7U)
#define SSM3582_FAULT_CTRL2_MRCV (1U << SSM3582_FAULT_CTRL2_MRCV_POS)
#define SSM3582_FAULT_CTRL2_AX_AR_POS (4U)
#define SSM3582_FAULT_CTRL2_AX_AR (1U << SSM3582_FAULT_CTRL2_AX_AR_POS)
#define SSM3582_FAULT_CTRL2_RCV_UV_POS (2U)
#define SSM3582_FAULT_CTRL2_RCV_UV (1U << SSM3582_FAULT_CTRL2_RCV_UV_POS)
#define SSM3582_FAULT_CTRL2_RCV_OT_POS 1U
#define SSM3582_FAULT_CTRL2_RCV_OT (1U << SSM3582_FAULT_CTRL2_RCV_OT_POS)
#define SSM3582_FAULT_CTRL2_RCV_OC_POS (0U)
#define SSM3582_FAULT_CTRL2_RCV_OC (1U << SSM3582_FAULT_CTRL2_RCV_OC_POS)

#define SSM3582_STATUS1_UVLO_PVDD_POS (7U)
#define SSM3582_STATUS1_UVLO_PVDD (1U << SSM3582_STATUS1_UVLO_PVDD_POS)
#define SSM3582_STATUS1_VLO_VREG_POS (6U)
#define SSM3582_STATUS1_VLO_VREG (1U << SSM3582_STATUS1_VLO_VREG_POS)
#define SSM3582_STATUS1_TF_POS 1U
#define SSM3582_STATUS1_TF (1U << SSM3582_STATUS1_TF_POS)
#define SSM3582_STATUS1_TW_POS (0U)
#define SSM3582_STATUS1_TW (1U << SSM3582_STATUS1_TW_POS)

#define SSM3582_STATUS2_LIM_EG_R_POS (7U)
#define SSM3582_STATUS2_LIM_EG_R (1U << SSM3582_STATUS2_LIM_EG_R_POS)
#define SSM3582_STATUS2_LIP_R_POS (6U)
#define SSM3582_STATUS2_LIP_R (1U << SSM3582_STATUS2_LIP_R_POS)
#define SSM3582_STATUS2_MP_OC_R_POS (5U)
#define SSM3582_STATUS2_MP_OC_R (1U << SSM3582_STATUS2_MP_OC_R_POS)
#define SSM3582_STATUS2_AT_WARN_R_POS (4U)
#define SSM3582_STATUS2_AT_WARN_R (1U << SSM3582_STATUS2_AT_WARN_R_POS)
#define SSM3582_STATUS2_IM_EG_L_POS (3U)
#define SSM3582_STATUS2_IM_EG_L (1U << SSM3582_STATUS2_IM_EG_L_POS)
#define SSM3582_STATUS2_LIP_L_POS (2U)
#define SSM3582_STATUS2_LIP_L (1U << SSM3582_STATUS2_LIP_L_POS)
#define SSM3582_STATUS2_MP_OC_L_POS 1U
#define SSM3582_STATUS2_MP_OC_L (1U << SSM3582_STATUS2_MP_OC_L_POS)
#define SSM3582_STATUS2_AT_WARN_L_POS (0U)
#define SSM3582_STATUS2_AT_WARN_L (1U << SSM3582_STATUS2_AT_WARN_L_POS)

#define SSM3582_SOFT_RESET_S_RST_POS (0U)
#define SSM3582_SOFT_RESET_S_RST (1U << SSM3582_SOFT_RESET_S_RST_POS)

#endif // SSM3582_H
